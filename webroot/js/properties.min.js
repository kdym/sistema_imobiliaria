function loadListMap(){var t=$("#list-properties-map").data("properties"),e=new google.maps.Map(document.getElementById("list-properties-map")),o=new google.maps.LatLngBounds;$.each(t,function(){var t=this,a=new google.maps.LatLng(Number(t.latitude),Number(t.longitude));new google.maps.Marker({position:a,map:e}).addListener("click",function(){var o={photo:t.photo,address:t.address,property_id:t.property_id,property_code:t.property_code};new google.maps.InfoWindow({content:$("#property-info-window-template").tmpl(o).html()}).open(e,this)}),o.extend(a)}),e.fitBounds(o)}function loadPropertyMap(){var t=new google.maps.LatLng(Number($("#property-map").data("latitude")),Number($("#property-map").data("longitude"))),e=new google.maps.Map(document.getElementById("property-map"),{center:t,zoom:17,mapTypeControl:!1,fullscreenControl:!1}),o=new google.maps.Marker({position:t,map:e}),a=document.createElement("div");a.innerHTML='<i class="fa fa-pencil"></i>',a.className="custom-maps-button";var n=document.createElement("div");n.innerHTML='<i class="fa fa-floppy-o"></i>',n.className="custom-maps-button";var r=document.createElement("div");r.innerHTML="Arraste o marcador para alterar a posição",r.className="maps-toast",a.addEventListener("click",function(){e.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(n),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(r),o.setDraggable(!0)}),n.addEventListener("click",function(){o.setDraggable(!1);var t=this;t.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>',$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:o.position.lat(),longitude:o.position.lng()},success:function(){t.innerHTML='<i class="fa fa-floppy-o"></i>',e.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(a),e.panTo(o.getPosition())}})}),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(a)}function updateLatitudeLongidute(t){$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:t.position.lat(),longitude:t.position.lng()},success:function(){}})}$("#cep").blur(function(){getCep($(this),function(t){$("#endereco").val(t.logradouro),$("#bairro").val(t.bairro),$("#cidade").val(t.localidade),$("#uf").val(t.uf)})}),$("#locator-search").autocomplete({source:function(t,e){$.ajax({url:"/locators/fetch.json",data:{name:t.term},dataType:"json",success:function(t){e(t)}})},select:function(t,e){return $("#locator-search").val(e.item.nome+" - "+e.item.formatted_username),$("#locator-id").val(e.item.locator.id),!1}}).autocomplete("instance")._renderItem=function(t,e){var o={name:e.nome,username:e.formatted_username};return $("<li>").append($("#locators-search-template").tmpl(o)).appendTo(t)},$("#broker-search").autocomplete({source:function(t,e){$.ajax({url:"/properties/fetch-broker.json",data:{name:t.term},dataType:"json",success:function(t){e(t)}})},select:function(t,e){return $("#broker-search").val(e.item.nome+" - "+e.item.formatted_username),$("#broker").val(e.item.id),!1}}).autocomplete("instance")._renderItem=function(t,e){var o={name:e.nome,username:e.formatted_username};return $("<li>").append($("#brokers-search-template").tmpl(o)).appendTo(t)},$("#locators-associations-chart").length&&new Chart($("#locators-associations-chart")[0].getContext("2d"),{type:"doughnut",data:{datasets:[{data:$("#locators-associations-chart").data("dataset"),backgroundColor:$("#locators-associations-chart").data("colors")}],labels:$("#locators-associations-chart").data("labels")},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(t,e){return e.datasets[t.datasetIndex].data[t.index]+"%"}}}}}),$("#descricao").length&&CKEDITOR.replace("descricao"),$("#list-properties-map").length&&$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){loadListMap()}),$("#property-map").length&&loadPropertyMap();