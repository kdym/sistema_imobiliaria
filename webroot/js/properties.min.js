function loadListMap(){var o=$("#list-properties-map").data("properties"),e=new google.maps.Map(document.getElementById("list-properties-map")),t=new google.maps.LatLngBounds;$.each(o,function(){var o=this,a=new google.maps.LatLng(Number(o.latitude),Number(o.longitude));new google.maps.Marker({position:a,map:e}).addListener("click",function(){var t={photo:o.photo,address:o.address,property_id:o.property_id,property_code:o.property_code};new google.maps.InfoWindow({content:$("#property-info-window-template").tmpl(t).html()}).open(e,this)}),t.extend(a)}),e.fitBounds(t)}function loadPropertyMap(){var o=new google.maps.LatLng(Number($("#property-map").data("latitude")),Number($("#property-map").data("longitude"))),e=new google.maps.Map(document.getElementById("property-map"),{center:o,zoom:17,mapTypeControl:!1,fullscreenControl:!1}),t=new google.maps.Marker({position:o,map:e}),a=document.createElement("div");a.innerHTML='<i class="fa fa-pencil"></i>',a.className="custom-maps-button";var n=document.createElement("div");n.innerHTML='<i class="fa fa-floppy-o"></i>',n.className="custom-maps-button";var r=document.createElement("div");r.innerHTML="Arraste o marcador para alterar a posição",r.className="maps-toast",a.addEventListener("click",function(){e.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(n),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(r),t.setDraggable(!0)}),n.addEventListener("click",function(){t.setDraggable(!1);var o=this;o.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>',$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:t.position.lat(),longitude:t.position.lng()},success:function(){o.innerHTML='<i class="fa fa-floppy-o"></i>',e.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(a),e.panTo(t.getPosition())}})}),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(a)}function updateLatitudeLongidute(o){$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:o.position.lat(),longitude:o.position.lng()},success:function(){}})}$("#cep").blur(function(){getCep($(this),function(o){$("#endereco").val(o.logradouro),$("#bairro").val(o.bairro),$("#cidade").val(o.localidade),$("#uf").val(o.uf)})}),$("#locator-search").autocomplete({source:function(o,e){$.ajax({url:"/locators/fetch.json",data:{name:o.term},dataType:"json",success:function(o){e(o)}})},select:function(o,e){return $("#locator-search").val(e.item.nome+" - "+e.item.formatted_username),$("#locator-id").val(e.item.locator.id),!1}}).autocomplete("instance")._renderItem=function(o,e){var t={name:e.nome,username:e.formatted_username};return $("<li>").append($("#locators-search-template").tmpl(t)).appendTo(o)},$("#descricao").length&&CKEDITOR.replace("descricao"),$("#list-properties-map").length&&$('a[data-toggle="tab"]').on("shown.bs.tab",function(o){loadListMap()}),$("#property-map").length&&loadPropertyMap();