function loadListMap(){var o=$("#list-properties-map").data("properties"),t=new google.maps.Map(document.getElementById("list-properties-map")),a=new google.maps.LatLngBounds;$.each(o,function(){var o=this,e=new google.maps.LatLng(Number(o.latitude),Number(o.longitude));new google.maps.Marker({position:e,map:t}).addListener("click",function(){var a={photo:o.photo,address:o.address,property_id:o.property_id,property_code:o.property_code};new google.maps.InfoWindow({content:$("#property-info-window-template").tmpl(a).html()}).open(t,this)}),a.extend(e)}),t.fitBounds(a)}function loadPropertyMap(){var o=new google.maps.LatLng(Number($("#property-map").data("latitude")),Number($("#property-map").data("longitude"))),t=new google.maps.Map(document.getElementById("property-map"),{center:o,zoom:17,mapTypeControl:!1,fullscreenControl:!1}),a=new google.maps.Marker({position:o,map:t}),e=document.createElement("div");e.innerHTML='<i class="fa fa-pencil"></i>',e.className="custom-maps-button";var n=document.createElement("div");n.innerHTML='<i class="fa fa-floppy-o"></i>',n.className="custom-maps-button";var s=document.createElement("div");s.innerHTML="Arraste o marcador para alterar a posição",s.className="maps-toast",e.addEventListener("click",function(){t.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(n),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(s),a.setDraggable(!0)}),n.addEventListener("click",function(){a.setDraggable(!1);var o=this;o.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>',$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:a.position.lat(),longitude:a.position.lng()},success:function(){o.innerHTML='<i class="fa fa-floppy-o"></i>',t.controls[google.maps.ControlPosition.TOP_RIGHT].clear(),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),t.panTo(a.getPosition())}})}),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(e)}function updateLatitudeLongidute(o){$.ajax({type:"post",url:"/properties/update-latitude-longitude",data:{id:$("#property-hidden-id").val(),latitude:o.position.lat(),longitude:o.position.lng()},success:function(){}})}$("#cep").blur(function(){getCep($(this),function(o){$("#endereco").val(o.logradouro),$("#bairro").val(o.bairro),$("#cidade").val(o.localidade),$("#uf").val(o.uf)})}),$("#locator-search").autocomplete({source:function(o,t){$.ajax({url:"/locators/fetch.json",data:{name:o.term},dataType:"json",success:function(o){t(o)}})},select:function(o,t){return $("#locator-search").val(t.item.nome+" - "+t.item.formatted_username),$("#locator-id").val(t.item.locator.id),!1}}).autocomplete("instance")._renderItem=function(o,t){var a={name:t.nome,username:t.formatted_username};return $("<li>").append($("#locators-search-template").tmpl(a)).appendTo(o)},$("#locators-associations-chart").length&&new Chart($("#locators-associations-chart")[0].getContext("2d"),{type:"doughnut",data:{datasets:[{data:$("#locators-associations-chart").data("dataset"),backgroundColor:$("#locators-associations-chart").data("colors")}],labels:$("#locators-associations-chart").data("labels")},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(o,t){return t.datasets[o.datasetIndex].data[o.index]+"%"}}}}}),$("#descricao").length&&CKEDITOR.replace("descricao"),$("#list-properties-map").length&&$('a[data-toggle="tab"]').on("shown.bs.tab",function(o){loadListMap()}),$("#property-map").length&&loadPropertyMap();