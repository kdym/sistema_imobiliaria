function addFee(){$("#new-fee-template").tmpl().appendTo("#fees-container"),setMoneyMasks()}function setMoneyMasks(){$('input[name="value[]"]').each(function(){$(this).maskMoney({prefix:"R$ ",affixesStay:!1,thousands:".",decimal:",",allowEmpty:!0,allowNegative:!0})})}function deleteCustom(e){$("#delete-custom-hidden-id").val($(e).data("custom-id")),$("#delete-custom-modal").modal("show")}function paySlip(e){var t=$(e).data("slip"),i=moment(t.salary);$("#pay-slip-salary").html(i.format("DD/MM/YYYY")),$("#pay-slip-hidden").val(JSON.stringify(t)),$("#pay-slip-calendar").datepicker({language:"pt-BR",todayHighlight:!0,endDate:"0d"}).on("changeDate",function(e){$("#pay-slip-selected-date").val(e.date.getFullYear()+"-"+(e.date.getMonth()+1)+"-"+e.date.getDate())}),$("#pay-slip-modal").modal("show")}function payMultipleSlips(){$("#pay-multiple-modal").modal("show")}function checkPayMultipleSlipsInputs(){$("#multiple-until-date").attr("readonly",!0),$("#multiple-start-date").attr("readonly",!0),$("#multiple-end-date").attr("readonly",!0),$("#multiple-until-date").val(""),$("#multiple-start-date").val(""),$("#multiple-end-date").val(""),$("#pay-multiple-choice-until").prop("checked")&&$("#multiple-until-date").removeAttr("readonly"),$("#pay-multiple-choice-period").prop("checked")&&($("#multiple-start-date").removeAttr("readonly"),$("#multiple-end-date").removeAttr("readonly"))}function unpaySlip(e){confirm("Tem certeza que deseja desfazer este pagamento?")&&($(e).html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$(e).prop("disabled",!0),$(e).unbind("click"),$(e).click(function(){return!1}),$.ajax({url:"/slips/un-pay-slip",data:$(e).data("slip"),type:"post",success:function(){location.reload()}}))}$("#add-fee-form").validate(),setMoneyMasks(),$("#new-fee-button").click(function(){addFee()}),$("#recursive-none-option").click(function(){$(".recursive-inputs").val(""),$(".recursive-inputs").attr("readonly","readonly"),$("#specific-date").removeAttr("readonly")}),$("#recursive-all-option").click(function(){$(".recursive-inputs").val(""),$(".recursive-inputs").attr("readonly","readonly")}),$("#recursive-start-at-option").click(function(){$(".recursive-inputs").val(""),$(".recursive-inputs").attr("readonly","readonly"),$("#start-at-input").removeAttr("readonly")}),$("#recursive-period-option").click(function(){$(".recursive-inputs").val(""),$(".recursive-inputs").attr("readonly","readonly"),$("#period-start-date").removeAttr("readonly"),$("#period-end-date").removeAttr("readonly")}),$("#recursive-fee-form").validate({ignore:[],rules:{category_hidden:"required",name:"required",value:"required",specific_date:{required:function(){return $("#recursive-none-option").prop("checked")}},start_at_input:{required:function(){return $("#recursive-start-at-option").prop("checked")}},period_start_date:{required:function(){return $("#recursive-period-option").prop("checked")}},period_end_date:{required:function(){return $("#recursive-period-option").prop("checked")},validPeriod:["period_start_date","period_end_date"]}},messages:{category_hidden:"Tipo InvÃ¡lido"},errorPlacement:function(e,t){switch(t.attr("name")){case"category_hidden":e.insertAfter("#category");break;default:e.insertAfter(t)}}}),$("#category").length&&$("#category").autocomplete({source:$("#category").data("valids"),select:function(e,t){return $("#category").val(t.item.label),$("#category-hidden").val(t.item.value),!1}}),$(".delete-custom-button").click(function(){return deleteCustom(this),!1}),$(".slip-pay-button").click(function(){return paySlip(this),!1}),$(".slip-unpay-button").click(function(){return unpaySlip(this),!1}),$("#pay-multiple-button").click(function(){return payMultipleSlips(),!1}),$("#pay-multiple-modal").length&&(checkPayMultipleSlipsInputs(),$.validator.addMethod("validPeriodPayMultiple",function(e,t){if($("#pay-multiple-choice-period").prop("checked")){if(moment($("#multiple-start-date").val(),$.validator.messages.dateFormat)>moment($("#multiple-end-date").val(),$.validator.messages.dateFormat))return!1}return!0},$.validator.messages.validPeriod),$("#pay-multiple-form").validate({rules:{multiple_until_date:{required:function(){return $("#pay-multiple-choice-until").prop("checked")},validDate:function(){return $("#pay-multiple-choice-until").prop("checked")}},multiple_start_date:{required:function(){return $("#pay-multiple-choice-period").prop("checked")},validDate:function(){return $("#pay-multiple-choice-period").prop("checked")}},multiple_end_date:{required:function(){return $("#pay-multiple-choice-period").prop("checked")},validDate:function(){return $("#pay-multiple-choice-period").prop("checked")},validPeriodPayMultiple:!0}}})),$('input[name="pay_multiple_choice"]').click(function(){checkPayMultipleSlipsInputs()}),$("#contract-bills-list").DataTable({order:[[0,"asc"]],columnDefs:[{orderable:!1,targets:[3]}],responsive:!0});